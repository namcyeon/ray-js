{"version":3,"file":"index.cjs","sources":["../src/payloads/ColorPayload.js","../src/payloads/HidePayload.js","../src/payloads/LogPayload.js","../src/payloads/NewScreenPayload.js","../src/payloads/RemovePayload.js","../src/payloads/SizePayload.js","../src/payloads/NotifyPayload.js","../src/payloads/CustomPayload.js","../src/payloads/JsonPayload.js","../src/utils/type.js","../src/index.js"],"sourcesContent":["export default color => ({\r\n    type: 'color',\r\n    content: { color },\r\n})\r\n","export default () => ({\r\n    type: 'hide',\r\n    content: [],\r\n})\r\n","export default (...values) => {\r\n    return {\r\n        type: 'log',\r\n        content: { values },\r\n    }\r\n}\r\n","export default name => ({\r\n    type: 'new_screen',\r\n    content: { name },\r\n})\r\n","export default () => ({\r\n    type: 'remove',\r\n    content: [],\r\n})\r\n","export default size => ({\r\n    type: 'size',\r\n    content: { size },\r\n})\r\n","export default value => ({\r\n    type: 'notify',\r\n    content: { value },\r\n})\r\n","export default (content, label) => ({\r\n    type: 'custom',\r\n    content: { content, label },\r\n})\r\n","export default (value) => {\r\n    return {\r\n        type: 'json_string',\r\n        content: { value: JSON.stringify(value) },\r\n    }\r\n}\r\n","/**\r\n * Check type of operand with more specificity than `typeof`.\r\n *   Slightly modified version of MDN helper found in `typeof` definition page.\r\n * @link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/typeof#real-world_usage\r\n *\r\n * @param {*} obj\r\n * @returns {string}\r\n */\r\nexport default function type(obj) {\r\n  if (obj == null) {\r\n    return (obj + '').toLowerCase() // implicit toString() conversion\r\n  }\r\n\r\n  const deepType = Object.prototype.toString.call(obj).slice(8, -1).toLowerCase()\r\n\r\n  if (deepType === 'generatorfunction') {\r\n    return 'function'\r\n  }\r\n\r\n  // Prevent over-specificity (for example, [object HTMLDivElement], etc).\r\n  // Account for functionish Regexp (Android <=2.3), functionish <object> element (Chrome <=57, Firefox <=52), etc.\r\n  // String.prototype.match is universally supported.\r\n\r\n  if (deepType.match(/^(array|bigint|date|error|function|generator|regexp|symbol)$/)) {\r\n    return deepType\r\n  }\r\n\r\n  return (typeof obj === 'object' || typeof obj === 'function')\r\n    ? 'object'\r\n    : typeof obj\r\n}\r\n","import axios from 'axios'\r\nimport uuid from 'uuid'\r\nimport ColorPayload from './payloads/ColorPayload'\r\nimport HidePayload from './payloads/HidePayload'\r\nimport LogPayload from './payloads/LogPayload'\r\nimport NewScreenPayload from './payloads/NewScreenPayload'\r\nimport RemovePayload from './payloads/RemovePayload'\r\nimport SizePayload from './payloads/SizePayload'\r\nimport NotifyPayload from './payloads/NotifyPayload'\r\nimport CustomPayload from './payloads/CustomPayload'\r\nimport JsonPayload from './payloads/JsonPayload'\r\nimport StackTrace from 'stacktrace-js'\r\nimport type from './utils/type'\r\n\r\nfunction makePayload(value) {\r\n    if (type(value) === 'object') {\r\n        return JsonPayload(value)\r\n    }\r\n\r\n    return LogPayload(value)\r\n}\r\n\r\nclass Ray {\r\n    static client\r\n\r\n    constructor(host = '127.0.0.1', port = 23517) {\r\n        this.uuid = uuid.v4()\r\n        this.client = axios.create({\r\n            baseURL: `http://${host}:${port}/`,\r\n        })\r\n    }\r\n\r\n    newScreen(name = '') {\r\n        this.sendRequest(NewScreenPayload(name))\r\n\r\n        return this\r\n    }\r\n\r\n    clearScreen() {\r\n        return this.newScreen()\r\n    }\r\n\r\n    color(color) {\r\n        this.sendRequest(ColorPayload(color))\r\n\r\n        return this\r\n    }\r\n\r\n    size(size) {\r\n        this.sendRequest(SizePayload(size))\r\n\r\n        return this\r\n    }\r\n\r\n    remove() {\r\n        this.sendRequest(RemovePayload())\r\n\r\n        return this\r\n    }\r\n\r\n    hide() {\r\n        this.sendRequest(HidePayload())\r\n\r\n        return this\r\n    }\r\n\r\n    notify(text) {\r\n        this.sendRequest(NotifyPayload(text))\r\n\r\n        return this\r\n    }\r\n\r\n    die() {\r\n        process.exit()\r\n    }\r\n\r\n    showWhen(boolOrFunc) {\r\n        if (typeof boolOrFunc == 'function') boolOrFunc = boolOrFunc()\r\n\r\n        if (!boolOrFunc) this.remove()\r\n\r\n        return this\r\n    }\r\n\r\n    showIf(boolOrFunc) {\r\n        return this.showWhen(boolOrFunc)\r\n    }\r\n\r\n    removeWhen(boolOrFunc) {\r\n        if (typeof boolOrFunc == 'function') boolOrFunc = boolOrFunc()\r\n\r\n        if (boolOrFunc) this.remove()\r\n\r\n        return this\r\n    }\r\n\r\n    removeIf(boolOrFunc) {\r\n        return this.removeWhen(boolOrFunc)\r\n    }\r\n\r\n    ban() {\r\n        return this.send('ðŸ•¶')\r\n    }\r\n\r\n    charles() {\r\n        return this.send('ðŸŽ¶ ðŸŽ¹ ðŸŽ· ðŸ•º')\r\n    }\r\n\r\n    send(...values) {\r\n        if (values.length == 0) return this\r\n\r\n        this.sendRequest(...values.map(makePayload))\r\n\r\n        return this\r\n    }\r\n\r\n    json(value) {\r\n        this.sendRequest(JsonPayload(value))\r\n\r\n        return this\r\n    }\r\n\r\n    pass(value) {\r\n        this.send(value)\r\n\r\n        return value\r\n    }\r\n\r\n    sendCustom(content, label = '') {\r\n        this.sendRequest(CustomPayload(content, label))\r\n\r\n        return this\r\n    }\r\n\r\n    getOrigin() {\r\n        const st = StackTrace.getSync()\r\n        return st.find(({ fileName }) => !fileName.includes('js-ray/dist/index') )\r\n    }\r\n\r\n    sendRequest(...payloads) {\r\n        const origin = this.getOrigin()\r\n        const requestPayload = {\r\n            uuid: this.uuid,\r\n            payloads: payloads.map(payload => {\r\n                payload.origin = {\r\n                    file: origin.fileName || 'unknown.js',\r\n                    line_number: origin.lineNumber || 1,\r\n                }\r\n\r\n                return payload\r\n            }),\r\n            meta: [],\r\n        }\r\n\r\n        this.client.post('/', requestPayload)\r\n    }\r\n}\r\n\r\nexport const ray = (...args) => new Ray().send(...args)\r\n"],"names":["color","type","content","values","name","size","value","label","JSON","stringify","obj","toLowerCase","deepType","Object","prototype","toString","call","slice","match","makePayload","JsonPayload","LogPayload","Ray","constructor","host","port","uuid","v4","client","axios","create","baseURL","newScreen","sendRequest","NewScreenPayload","clearScreen","ColorPayload","SizePayload","remove","RemovePayload","hide","HidePayload","notify","text","NotifyPayload","die","process","exit","showWhen","boolOrFunc","showIf","removeWhen","removeIf","ban","send","charles","length","map","json","pass","sendCustom","CustomPayload","getOrigin","st","StackTrace","getSync","find","fileName","includes","payloads","origin","requestPayload","payload","file","line_number","lineNumber","meta","post","ray","args"],"mappings":"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"}