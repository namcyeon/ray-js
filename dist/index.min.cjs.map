{"version":3,"file":"index.min.cjs","sources":["../src/payloads/ColorPayload.js","../src/payloads/JsonPayload.js","../src/index.js","../src/utils/type.js","../src/payloads/LogPayload.js","../src/payloads/NewScreenPayload.js","../src/payloads/SizePayload.js","../src/payloads/RemovePayload.js","../src/payloads/HidePayload.js","../src/payloads/NotifyPayload.js","../src/payloads/CustomPayload.js"],"sourcesContent":["export default color => ({\r\n    type: 'color',\r\n    content: { color },\r\n})\r\n","export default (value) => {\r\n    return {\r\n        type: 'json_string',\r\n        content: { value: JSON.stringify(value) },\r\n    }\r\n}\r\n","import axios from 'axios'\r\nimport uuid from 'uuid'\r\nimport ColorPayload from './payloads/ColorPayload'\r\nimport HidePayload from './payloads/HidePayload'\r\nimport LogPayload from './payloads/LogPayload'\r\nimport NewScreenPayload from './payloads/NewScreenPayload'\r\nimport RemovePayload from './payloads/RemovePayload'\r\nimport SizePayload from './payloads/SizePayload'\r\nimport NotifyPayload from './payloads/NotifyPayload'\r\nimport CustomPayload from './payloads/CustomPayload'\r\nimport JsonPayload from './payloads/JsonPayload'\r\nimport StackTrace from 'stacktrace-js'\r\nimport type from './utils/type'\r\n\r\nfunction makePayload(value) {\r\n    if (type(value) === 'object') {\r\n        return JsonPayload(value)\r\n    }\r\n\r\n    return LogPayload(value)\r\n}\r\n\r\nclass Ray {\r\n    static client\r\n\r\n    constructor(host = '127.0.0.1', port = 23517) {\r\n        this.uuid = uuid.v4()\r\n        this.client = axios.create({\r\n            baseURL: `http://${host}:${port}/`,\r\n        })\r\n    }\r\n\r\n    newScreen(name = '') {\r\n        this.sendRequest(NewScreenPayload(name))\r\n\r\n        return this\r\n    }\r\n\r\n    clearScreen() {\r\n        return this.newScreen()\r\n    }\r\n\r\n    color(color) {\r\n        this.sendRequest(ColorPayload(color))\r\n\r\n        return this\r\n    }\r\n\r\n    size(size) {\r\n        this.sendRequest(SizePayload(size))\r\n\r\n        return this\r\n    }\r\n\r\n    remove() {\r\n        this.sendRequest(RemovePayload())\r\n\r\n        return this\r\n    }\r\n\r\n    hide() {\r\n        this.sendRequest(HidePayload())\r\n\r\n        return this\r\n    }\r\n\r\n    notify(text) {\r\n        this.sendRequest(NotifyPayload(text))\r\n\r\n        return this\r\n    }\r\n\r\n    die() {\r\n        process.exit()\r\n    }\r\n\r\n    showWhen(boolOrFunc) {\r\n        if (typeof boolOrFunc == 'function') boolOrFunc = boolOrFunc()\r\n\r\n        if (!boolOrFunc) this.remove()\r\n\r\n        return this\r\n    }\r\n\r\n    showIf(boolOrFunc) {\r\n        return this.showWhen(boolOrFunc)\r\n    }\r\n\r\n    removeWhen(boolOrFunc) {\r\n        if (typeof boolOrFunc == 'function') boolOrFunc = boolOrFunc()\r\n\r\n        if (boolOrFunc) this.remove()\r\n\r\n        return this\r\n    }\r\n\r\n    removeIf(boolOrFunc) {\r\n        return this.removeWhen(boolOrFunc)\r\n    }\r\n\r\n    ban() {\r\n        return this.send('ðŸ•¶')\r\n    }\r\n\r\n    charles() {\r\n        return this.send('ðŸŽ¶ ðŸŽ¹ ðŸŽ· ðŸ•º')\r\n    }\r\n\r\n    send(...values) {\r\n        if (values.length == 0) return this\r\n\r\n        this.sendRequest(...values.map(makePayload))\r\n\r\n        return this\r\n    }\r\n\r\n    json(value) {\r\n        this.sendRequest(JsonPayload(value))\r\n\r\n        return this\r\n    }\r\n\r\n    pass(value) {\r\n        this.send(value)\r\n\r\n        return value\r\n    }\r\n\r\n    sendCustom(content, label = '') {\r\n        this.sendRequest(CustomPayload(content, label))\r\n\r\n        return this\r\n    }\r\n\r\n    getOrigin() {\r\n        const st = StackTrace.getSync()\r\n        return st.find(({ fileName }) => !fileName.includes('js-ray/dist/index') )\r\n    }\r\n\r\n    sendRequest(...payloads) {\r\n        const origin = this.getOrigin()\r\n        const requestPayload = {\r\n            uuid: this.uuid,\r\n            payloads: payloads.map(payload => {\r\n                payload.origin = {\r\n                    file: origin.fileName || 'unknown.js',\r\n                    line_number: origin.lineNumber || 1,\r\n                }\r\n\r\n                return payload\r\n            }),\r\n            meta: [],\r\n        }\r\n\r\n        this.client.post('/', requestPayload)\r\n    }\r\n}\r\n\r\nexport const ray = (...args) => new Ray().send(...args)\r\n","/**\r\n * Check type of operand with more specificity than `typeof`.\r\n *   Slightly modified version of MDN helper found in `typeof` definition page.\r\n * @link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/typeof#real-world_usage\r\n *\r\n * @param {*} obj\r\n * @returns {string}\r\n */\r\nexport default function type(obj) {\r\n  if (obj == null) {\r\n    return (obj + '').toLowerCase() // implicit toString() conversion\r\n  }\r\n\r\n  const deepType = Object.prototype.toString.call(obj).slice(8, -1).toLowerCase()\r\n\r\n  if (deepType === 'generatorfunction') {\r\n    return 'function'\r\n  }\r\n\r\n  // Prevent over-specificity (for example, [object HTMLDivElement], etc).\r\n  // Account for functionish Regexp (Android <=2.3), functionish <object> element (Chrome <=57, Firefox <=52), etc.\r\n  // String.prototype.match is universally supported.\r\n\r\n  if (deepType.match(/^(array|bigint|date|error|function|generator|regexp|symbol)$/)) {\r\n    return deepType\r\n  }\r\n\r\n  return (typeof obj === 'object' || typeof obj === 'function')\r\n    ? 'object'\r\n    : typeof obj\r\n}\r\n","export default (...values) => {\r\n    return {\r\n        type: 'log',\r\n        content: { values },\r\n    }\r\n}\r\n","export default name => ({\r\n    type: 'new_screen',\r\n    content: { name },\r\n})\r\n","export default size => ({\r\n    type: 'size',\r\n    content: { size },\r\n})\r\n","export default () => ({\r\n    type: 'remove',\r\n    content: [],\r\n})\r\n","export default () => ({\r\n    type: 'hide',\r\n    content: [],\r\n})\r\n","export default value => ({\r\n    type: 'notify',\r\n    content: { value },\r\n})\r\n","export default (content, label) => ({\r\n    type: 'custom',\r\n    content: { content, label },\r\n})\r\n"],"names":["value","type","content","JSON","stringify","makePayload","obj","toLowerCase","deepType","Object","prototype","toString","call","slice","match","JsonPayload","values","LogPayload","Ray","constructor","host","port","uuid","v4","client","axios","create","baseURL","newScreen","name","sendRequest","NewScreenPayload","this","clearScreen","color","ColorPayload","size","SizePayload","remove","hide","notify","text","die","process","exit","showWhen","boolOrFunc","showIf","removeWhen","removeIf","ban","send","charles","length","map","json","pass","sendCustom","label","CustomPayload","getOrigin","StackTrace","getSync","find","fileName","includes","payloads","origin","requestPayload","payload","file","line_number","lineNumber","meta","post","args"],"mappings":"yOAAA,YCAgBA,IACL,CACHC,KAAM,cACNC,QAAS,CAAEF,MAAOG,KAAKC,UAAUJ,MCWzC,SAASK,EAAYL,SACG,WCPT,SAAcM,MAChB,MAAPA,SACMA,EAAM,IAAIC,oBAGdC,EAAWC,OAAOC,UAAUC,SAASC,KAAKN,GAAKO,MAAM,GAAI,GAAGN,oBAEjD,sBAAbC,EACK,WAOLA,EAASM,MAAM,gEACVN,EAGc,iBAARF,GAAmC,mBAARA,EACtC,gBACOA,EDdLL,CAAKD,GACEe,EAAYf,QEhBRgB,KACR,CACHf,KAAM,MACNC,QAAS,CAAEc,OAAAA,KFgBRC,CAAWjB,GAGtB,MAAMkB,EAGFC,YAAYC,EAAO,YAAaC,EAAO,YAC9BC,KAAOA,UAAKC,UACZC,OAASC,UAAMC,OAAO,CACvBC,QAAU,UAASP,KAAQC,OAInCO,UAAUC,EAAO,gBACRC,aGjCED,KACX5B,KAAM,aACNC,QAAS,CAAE2B,KAAAA,KH+BUE,CAAiBF,IAE3BG,KAGXC,qBACWD,KAAKJ,YAGhBM,MAAMA,eACGJ,aF3CEI,KACXjC,KAAM,QACNC,QAAS,CAAEgC,MAAAA,KEyCUC,CAAaD,IAEvBF,KAGXI,KAAKA,eACIN,aIjDEM,KACXnC,KAAM,OACNC,QAAS,CAAEkC,KAAAA,KJ+CUC,CAAYD,IAEtBJ,KAGXM,qBACSR,aKtDT7B,KAAM,SACNC,QAAS,KLuDE8B,KAGXO,mBACST,aM5DT7B,KAAM,OACNC,QAAS,KN6DE8B,KAGXQ,OAAOC,eACEX,aOlET7B,KAAM,SACNC,QAAS,CAAEF,MPiEwByC,KAExBT,KAGXU,MACIC,QAAQC,OAGZC,SAASC,SACoB,mBAAdA,IAA0BA,EAAaA,KAE7CA,GAAYd,KAAKM,SAEfN,KAGXe,OAAOD,UACId,KAAKa,SAASC,GAGzBE,WAAWF,SACkB,mBAAdA,IAA0BA,EAAaA,KAE9CA,GAAYd,KAAKM,SAEdN,KAGXiB,SAASH,UACEd,KAAKgB,WAAWF,GAG3BI,aACWlB,KAAKmB,KAAK,MAGrBC,iBACWpB,KAAKmB,KAAK,eAGrBA,QAAQnC,UACiB,GAAjBA,EAAOqC,aAENvB,eAAed,EAAOsC,IAAIjD,IAFA2B,KAOnCuB,KAAKvD,eACI8B,YAAYf,EAAYf,IAEtBgC,KAGXwB,KAAKxD,eACImD,KAAKnD,GAEHA,EAGXyD,WAAWvD,EAASwD,EAAQ,gBACnB5B,cQjIG5B,EAASwD,MACrBzD,KAAM,SACNC,QAAS,CAAEA,QAAAA,EAASwD,MAAAA,KR+HCC,CAAczD,EAASwD,IAEjC1B,KAGX4B,mBACeC,UAAWC,UACZC,MAAK,EAAGC,SAAAA,MAAgBA,EAASC,SAAS,uBAGxDnC,eAAeoC,SACLC,EAASnC,KAAK4B,YACdQ,EAAiB,CACnB9C,KAAMU,KAAKV,KACX4C,SAAUA,EAASZ,KAAIe,IACnBA,EAAQF,OAAS,CACbG,KAAMH,EAAOH,UAAY,aACzBO,YAAaJ,EAAOK,YAAc,GAG/BH,KAEXI,KAAM,SAGLjD,OAAOkD,KAAK,IAAKN,8BApIxBlD,qGAwIa,IAAIyD,KAAS,IAAIzD,GAAMiC,QAAQwB"}